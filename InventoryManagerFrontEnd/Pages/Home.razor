@page "/"
@inject HttpClient Http;
@inject ILogger<string> _logger;

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

@if (_productList?.ProductTypes != null)
@foreach(var product in _productList.ProductTypes)
{
    <h1>@product.Name</h1>
}



@code
{
    private ProductTypeListResponse? _productList;


    protected override async Task OnInitializedAsync()
     {

        try
        {
            _productList = await Http.GetFromJsonAsync<ProductTypeListResponse>("https://localhost:7200/api/ProductType");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error while fetching: {ex.Message}");
        }


    }

}